# springboot-java-lang

## 反射

    反射是Java语言提供的一种动态获取对象信息的机制，它允许程序在运行时动态地获取类信息，并调用其方法。

### 反射工作流程

1. 获取 Class 对象:

    * 通过 Class.forName("fully.qualified.ClassName") 静态方法获取
    * 通过 someObject.getClass() 方法获取
    * 通过 SomeClass.class 语法获取

2. 使用 Class 对象探查类的结构:

    * 使用 Class 对象的各种方法,如 getName(), getModifiers(), getSuperclass(), getInterfaces() 等,获取类的基本信息。
    * 使用 Class 对象的 getDeclaredConstructors(), getDeclaredMethods(), getDeclaredFields() 等方法,获取类的构造函数、方法和字段信息。

3. 动态创建对象和调用方法:

    * 使用 Class 对象的 newInstance() 方法创建类的实例。
    * 使用 Class 对象的 getConstructor() 方法获取构造函数,然后使用 newInstance() 方法创建对象。
    * 使用 Class 对象的 getMethod() 方法获取方法,然后使用 invoke() 方法动态调用方法。
    * 使用 Class 对象的 getField() 方法获取字段,然后使用 get() 和 set() 方法读取和修改字段的值。

4. 动态加载类和调用方法:

    * 可以在运行时动态地加载类,而不需要在编译时就知道具体的类型。
    * 可以在运行时动态地调用方法,而不需要在编译时就知道方法的签名。

总的来说,Java 反射API 提供了一种强大的机制,使得 Java 程序能够在运行时检查和操作自身的结构和行为。这为编写灵活、可扩展的应用程序提供了很大的便利。

### 反射常见场景

1. 动态实例化对象:
    * 使用 Class.newInstance() 或 Constructor.newInstance() 方法,可以在运行时动态地创建对象,而不需要在编译时就知道具体的类型。这在使用插件系统或依赖注入框架时非常有用。
2. 动态调用方法:
    * 使用 Method.invoke() 方法,可以在运行时动态地调用对象的方法,而不需要在编译时就知道方法的签名。这在实现 RPC 调用或
      ORM 框架时非常有用。
3. 动态访问和修改字段:
    * 除了修改私有字段,反射还可以用来访问和修改公有字段。这在一些元数据驱动的框架中很有用,比如 JSON 序列化/反序列化库。
4. 实现代理模式:
    * 反射可以用来动态地创建代理对象,拦截对目标对象的方法调用。这在实现 AOP、安全检查、缓存等功能时很有用。
5. 实现动态编译:
    * 反射可以用来在运行时动态地编译和执行 Java 代码,这在实现脚本引擎或者热部署功能时很有用。
6. 实现 ORM 映射:
    * 反射可以用来自动地在 Java 对象和数据库表之间进行映射,简化 ORM 框架的实现。
7. 实现序列化和反序列化:
    * 反射可以用来自动地生成序列化和反序列化的代码,简化 Java 对象在不同系统之间的传输。
8. 实现框架和库的可扩展性:
    * 反射可以使框架和库更加灵活和可扩展,允许用户注入自定义的功能模块或组件。
9. 实现动态加载和卸载类:
    * 反射可以用来在运行时动态地加载和卸载类,实现动态加载和卸载功能。
10. 实现动态配置:
    * 反射可以用来在运行时动态地读取配置文件,实现动态配置功能。
11. 实现动态代理:
    * 反射可以用来在运行时动态地创建代理对象,实现动态代理功能。
12. 实现操作注解：
    * 反射可以用来操作注解，实现注解驱动的功能。

### 反射操作注解的常见用途

1. 获取注解信息:
    * 使用 Class.getAnnotations() 方法可以获取类上定义的所有注解。
    * 使用 Method.getAnnotations() 和 Field.getAnnotations() 方法可以获取方法和字段上定义的注解。
    * 使用 AnnotatedElement.getAnnotation(Class<T>) 方法可以获取指定类型的注解实例。
2. 动态处理注解:
    * 可以在运行时检查注解的存在和属性值,并根据注解的信息执行相应的逻辑。这在实现框架的注解驱动特性时很有用。
3. 生成注解:
    * 可以使用反射 API dynamically生成注解实例,并将其应用到类、方法或字段上。这在实现元编程或字节码生成等技术时很有用。

